(self.webpackChunkproject_test=self.webpackChunkproject_test||[]).push([[739],{1739:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ChildRoutesModule:()=>v});var a=i(4655),r=i(7716),o=i(2754);let s=(()=>{class t{constructor(t,e){this.usuarioService=t,this.router=e}canActivate(t,e){return"ADMIN_ROLE"===this.usuarioService.role||(this.router.navigateByUrl("/dashboard"),!1)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(o.i),r.LFG(a.F0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var n=i(8259),u=i.n(n),d=i(8583),c=i(3679);let l=(()=>{class t{constructor(t){this.userService=t,this.newItemEvent=new r.vpe,this.usuarioForm=new c.cw({nombre:new c.NI("",[c.kI.required]),email:new c.NI("",[c.kI.required])})}ngOnInit(){}ngOnChanges(t){if(void 0!==t.dataUser.currentValue)this.usuarioChild=t.dataUser.currentValue.usuario,this.usuarioForm.patchValue({nombre:this.usuarioChild.nombre,email:this.usuarioChild.email});else if(void 0===t.dataUser.currentValue)return}guardarData(){this.usuarioChild.nombre=this.usuarioForm.value.nombre,this.usuarioChild.email=this.usuarioForm.value.email,this.userService.saveData(this.usuarioChild),this.newItemEvent.emit("fue editado correctamente")}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(o.i))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-editar-usuario"]],inputs:{dataUser:"dataUser"},outputs:{newItemEvent:"newItemEvent"},features:[r.TTD],decls:22,vars:1,consts:[["id","modalEditar","tabindex","-1","aria-labelledby","modalEdit","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalEdit",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup"],[1,"form-group"],["for","exampleInputEmail1"],["formControlName","nombre","type","text","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","Nombre",1,"form-control"],["for","exampleInputPassword1"],["formControlName","email","type","text","id","exampleInputPassword1","placeholder","email",1,"form-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"h3",4),r._uU(5,"Editar usuario "),r.qZA(),r._UZ(6,"button",5),r.qZA(),r.TgZ(7,"div",6),r.TgZ(8,"form",7),r.TgZ(9,"div",8),r.TgZ(10,"label",9),r._uU(11,"Nombre"),r.qZA(),r._UZ(12,"input",10),r.qZA(),r.TgZ(13,"div",8),r.TgZ(14,"label",11),r._uU(15,"Email"),r.qZA(),r._UZ(16,"input",12),r.qZA(),r.TgZ(17,"div",13),r.TgZ(18,"button",14),r._uU(19,"Cerrar"),r.qZA(),r.TgZ(20,"button",15),r.NdJ("click",function(){return e.guardarData()}),r._uU(21,"Guadar"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(8),r.Q6J("formGroup",e.usuarioForm))},directives:[c._Y,c.JL,c.sg,c.Fj,c.JJ,c.u],styles:[""]}),t})();var m=i(6627),g=i(8590);function Z(t,e){1&t&&(r.TgZ(0,"div",3),r.TgZ(1,"div",4),r.TgZ(2,"div",5),r.TgZ(3,"h4",6),r._uU(4,"Cargando"),r.qZA(),r._UZ(5,"em",7),r.TgZ(6,"p",8),r._uU(7,"Por favor espere"),r.qZA(),r.qZA(),r.qZA(),r.qZA())}function p(t,e){1&t&&(r.TgZ(0,"span",26),r._uU(1,"Google"),r.qZA())}function h(t,e){1&t&&(r.TgZ(0,"span",27),r._uU(1,"Email"),r.qZA())}function f(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"tr",13),r.TgZ(1,"th",16),r._uU(2),r.qZA(),r.TgZ(3,"td"),r._uU(4),r.qZA(),r.TgZ(5,"td"),r._uU(6),r.qZA(),r.TgZ(7,"td"),r.TgZ(8,"select",17),r.NdJ("ngModelChange",function(e){return r.CHM(t).$implicit.role=e})("change",function(){const e=r.CHM(t).$implicit;return r.oxw(2).cambiarRole(e)}),r.TgZ(9,"option",18),r._uU(10,"Admin"),r.qZA(),r.TgZ(11,"option",19),r._uU(12,"User"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(13,"td"),r.YNc(14,p,2,0,"span",20),r.YNc(15,h,2,0,"span",21),r.qZA(),r.TgZ(16,"td",22),r.TgZ(17,"div",23),r.TgZ(18,"mat-icon",24),r.NdJ("click",function(){const e=r.CHM(t),i=e.$implicit,a=e.index;return r.oxw(2).openModalEditar(i,a)}),r._uU(19,"edit"),r.qZA(),r.qZA(),r.TgZ(20,"div"),r.TgZ(21,"mat-icon",25),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw(2).eliminarUsuario(e)}),r._uU(22,"delete"),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit,i=e.index;r.xp6(2),r.hij(" ",i+1," "),r.xp6(2),r.Oqu(t.nombre),r.xp6(2),r.Oqu(t.email),r.xp6(2),r.Q6J("ngModel",t.role),r.xp6(6),r.Q6J("ngIf",t.google),r.xp6(1),r.Q6J("ngIf",!t.google)}}function b(t,e){if(1&t&&(r.TgZ(0,"div",9),r.TgZ(1,"h4",10),r._uU(2),r.qZA(),r.TgZ(3,"h6",11),r._uU(4,"Registrados"),r.qZA(),r.TgZ(5,"table",12),r.TgZ(6,"thead"),r.TgZ(7,"tr",13),r.TgZ(8,"th",14),r._uU(9,"#"),r.qZA(),r.TgZ(10,"th",14),r._uU(11,"Nombre"),r.qZA(),r.TgZ(12,"th",14),r._uU(13,"Email"),r.qZA(),r.TgZ(14,"th",14),r._uU(15,"Role"),r.qZA(),r.TgZ(16,"th",14),r._uU(17,"Auth"),r.qZA(),r.TgZ(18,"th",14),r._uU(19,"Acciones"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(20,"tbody"),r.YNc(21,f,23,6,"tr",15),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(2),r.hij("Total de usuarios (",t.totalUsuarios,")"),r.xp6(19),r.Q6J("ngForOf",t.usuarios)}}const T=[{path:"users",component:(()=>{class t{constructor(t){this.usuariosServices=t,this.totalUsuarios=0,this.usuarios=[],this.usuariosTemp=[],this.desde=0,this.cargando=!0,this.isEditar=!1}ngOnInit(){this.cargarUsuarios()}cargarUsuarios(){this.cargando=!0,this.usuariosServices.cargarUsuarios().subscribe(({total:t,usuarios:e})=>{this.totalUsuarios=t,this.usuarios=e,this.usuariosTemp=e,this.cargando=!1})}cambiarPagina(t){this.desde+=t,this.desde<0?this.desde=0:this.desde>=this.totalUsuarios&&(this.desde-=t),this.cargarUsuarios()}eliminarUsuario(t){if(t.uid===this.usuariosServices.uid)return u().fire("Error","No puede borrarse a si mismo","error");u().fire({title:"Eliminar usuario?",text:`Esta a punto de eliminar a ${t.nombre}`,icon:"question",showCancelButton:!0,confirmButtonText:"Si, eliminar!"}).then(e=>{e.isConfirmed&&this.usuariosServices.eliminarUsuario(t).subscribe(e=>{this.cargarUsuarios(),u().fire("Eliminado!",`${t.nombre} fue eliminado correctamente`,"success")})})}cambiarRole(t){this.usuariosServices.guardarUsuario(t).subscribe(t=>{})}openModalEditar(t,e){this.usuarioParent={usuario:t,idx:e}}addItem(t){u().fire({title:"Editar usuario?",text:`Esta a punto de editar a ${this.usuariosServices.usuario.nombre}`,icon:"question",showCancelButton:!0,confirmButtonText:"Si, editar!"}).then(e=>{e.isConfirmed&&this.usuariosServices.guardarUsuario(this.usuariosServices.usuario).subscribe(e=>{this.cargarUsuarios(),u().fire("Editado!",`${this.usuariosServices.usuario.nombre} ${t}`,"success")})})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(o.i))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-users"]],decls:5,vars:3,consts:[["class","row animated fadeIn fast",4,"ngIf"],["class","card-body",4,"ngIf"],[3,"dataUser","newItemEvent"],[1,"row","animated","fadeIn","fast"],[1,"col-12"],["role","alert",1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-0"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle"],[1,"table","table-dark","table-striped"],[1,"center"],["scope","col"],["class","center",4,"ngFor","ngForOf"],["scope","row"],[1,"form-control","cursor",3,"ngModel","ngModelChange","change"],["value","ADMIN_ROLE"],["value","USER_ROLE"],["class","badge bg-primary",4,"ngIf"],["class","badge bg-danger",4,"ngIf"],[1,"text-nowrap","text-center"],["id","divEdit","data-bs-target","#modalEditar","data-bs-toggle","modal"],["aria-hidden","false","aria-label","icon edit","data-toggle","tooltip","matTooltip","Editar","matTooltipPosition","above",1,"cursor",3,"click"],["data-toggle","tooltip","matTooltip","Borrar","matTooltipPosition","above","aria-hidden","false","aria-label","delete icon",1,"cursor",3,"click"],[1,"badge","bg-primary"],[1,"badge","bg-danger"]],template:function(t,e){1&t&&(r.TgZ(0,"h1"),r._uU(1,"Usuarios"),r.qZA(),r.YNc(2,Z,8,0,"div",0),r.YNc(3,b,22,2,"div",1),r.TgZ(4,"app-editar-usuario",2),r.NdJ("newItemEvent",function(t){return e.addItem(t)}),r.qZA()),2&t&&(r.xp6(2),r.Q6J("ngIf",e.cargando),r.xp6(1),r.Q6J("ngIf",!e.cargando),r.xp6(1),r.Q6J("dataUser",e.usuarioParent))},directives:[d.O5,l,d.sg,c.EJ,c.JJ,c.On,c.YN,c.Kr,m.Hw,g.gM],styles:[".w-100[_ngcontent-%COMP%]{width:100%!important}.mat-icon[_ngcontent-%COMP%]{color:#af1212}.cursor[_ngcontent-%COMP%]{cursor:pointer}#divEdit[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:blue}"]}),t})(),data:{title:"Usuarios"},canActivate:[s]}];let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[a.Bz.forChild(T)],a.Bz]}),t})()}}]);